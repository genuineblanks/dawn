{% comment %}
Tech-Pack Pre-Step: Client Registration Check - Premium Design
{% endcomment %}

<section id="techpack-step-0" class="techpack-step" data-step="0" style="display: block;">
  <div class="techpack-container">
    <div class="techpack-progress">
      <div class="techpack-progress__bar">
        <div class="techpack-progress__fill" style="width: 0%"></div>
      </div>
      <div class="techpack-progress__steps">
        <div class="techpack-progress__step techpack-progress__step--active">
          <div class="techpack-progress__step-circle techpack-progress__step-circle--active">1</div>
          <div class="techpack-progress__step-label">Client Info</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">2</div>
          <div class="techpack-progress__step-label">File Upload</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">3</div>
          <div class="techpack-progress__step-label">Garment Details</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">4</div>
          <div class="techpack-progress__step-label">Review</div>
        </div>
      </div>
    </div>

    <div class="techpack-content">
      <!-- Client verification modal trigger -->
      <div class="techpack-client-modal-trigger">
        <h2 class="techpack-title">Welcome to Tech-Pack Submission</h2>
        <p class="techpack-subtitle">Please verify your client status to continue</p>
        <button type="button" class="techpack-btn techpack-btn--primary" id="open-client-modal">
          Begin Verification
          <svg class="techpack-btn__icon" width="16" height="16" viewBox="0 0 16 16">
            <path d="M6 12l4-4-4-4" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</section>

<section id="techpack-step-1" class="techpack-step" data-step="1" style="display: none;">
  <div class="techpack-container">
    <div class="techpack-progress">
      <div class="techpack-progress__bar">
        <div class="techpack-progress__fill" style="width: 50%"></div>
      </div>
      <div class="techpack-progress__steps">
        <div class="techpack-progress__step techpack-progress__step--active">
          <div class="techpack-progress__step-circle techpack-progress__step-circle--active">1</div>
          <div class="techpack-progress__step-label">Client Info</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">2</div>
          <div class="techpack-progress__step-label">File Upload</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">3</div>
          <div class="techpack-progress__step-label">Garment Details</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">4</div>
          <div class="techpack-progress__step-label">Review</div>
        </div>
      </div>
    </div>

    <div class="techpack-content">
      <h2 class="techpack-title">Client Information</h2>
      <p class="techpack-subtitle" id="client-info-subtitle">Please provide your business details</p>

      <form class="techpack-form" autocomplete="off" novalidate>
        <!-- Row 1: Client Name - Company Name -->
        <div class="techpack-form__row">
          <div class="techpack-form__group techpack-form__group--required">
            <label for="client-name" class="techpack-form__label">Contact Name</label>
            <input
              type="text"
              id="client-name"
              name="clientName"
              class="techpack-form__input"
              required
              data-validate="required"
              placeholder="Full name of primary contact"
            >
            <div class="techpack-form__error" role="alert"></div>
          </div>

          <div class="techpack-form__group techpack-form__group--required">
            <label for="company-name" class="techpack-form__label">Business/Brand Name</label>
            <input
              type="text"
              id="company-name"
              name="companyName"
              class="techpack-form__input"
              required
              data-validate="required"
              placeholder="Registered business or brand name"
            >
            <div class="techpack-form__error" role="alert"></div>
          </div>
        </div>

        <!-- Row 2: Email Address - VAT/EIN Number -->
        <div class="techpack-form__row">
          <div class="techpack-form__group techpack-form__group--required">
            <label for="email" class="techpack-form__label">Business Email Address</label>
            <input
              type="email"
              id="email"
              name="email"
              class="techpack-form__input"
              required
              data-validate="email"
              placeholder="contact@company.com"
            >
            <div class="techpack-form__error" role="alert"></div>
          </div>

          <div class="techpack-form__group" id="vat-ein-group">
            <label for="vat-ein" class="techpack-form__label" id="vat-ein-label">
              VAT/EIN Number <span class="techpack-form__label-status" id="vat-ein-status">(required for new businesses)</span>
            </label>
            <input
              type="text"
              id="vat-ein"
              name="vatEin"
              class="techpack-form__input"
              data-validate="vat-ein"
              placeholder="VAT: GB123456789 or EIN: 12-3456789"
            >
            <div class="techpack-form__error" role="alert"></div>
            <div class="techpack-form__help" id="vat-ein-help">
              Required to verify your business registration status
            </div>
          </div>
        </div>

        <!-- Row 3: Phone Number - Country -->
        <div class="techpack-form__row">
          <div class="techpack-form__group">
            <label for="phone" class="techpack-form__label">
              Business Phone <span class="techpack-form__label-status">(optional)</span>
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="techpack-form__input"
              placeholder="+1 234 567 8901"
              maxlength="20"
              data-validate="phone"
            >
            <div class="techpack-form__error" role="alert"></div>
          </div>

          <div class="techpack-form__group techpack-form__group--required">
            <label for="country" class="techpack-form__label">Business Location</label>
            <div class="techpack-form__country-wrapper">
              <input
                type="text"
                id="country"
                name="country"
                class="techpack-form__input techpack-form__country-input"
                required
                data-validate="required"
                autocomplete="off"
                placeholder="Country where business is registered"
                readonly
              >
              <div class="techpack-form__country-toggle" id="country-toggle">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M4 6l4 4 4-4H4z"/>
                </svg>
              </div>
              <div class="techpack-form__dropdown" id="country-dropdown"></div>
            </div>
            <div class="techpack-form__error" role="alert"></div>
          </div>
        </div>

        <!-- Row 4: Production Type - Project Deadline -->
        <div class="techpack-form__row">
          <div class="techpack-form__group techpack-form__group--required">
            <label for="production-type" class="techpack-form__label">Production Type</label>
            <select
              id="production-type"
              name="productionType"
              class="techpack-form__select"
              required
              data-validate="required"
            >
              <option value="">Select production type...</option>
              <option value="custom-production">Custom Production</option>
              <option value="our-blanks">Our Blanks</option>
            </select>
            <div class="techpack-form__error" role="alert"></div>
          </div>

          <div class="techpack-form__group">
            <label for="deadline" class="techpack-form__label"
              >Target Deadline <span class="techpack-form__label-status">(optional)</span></label
            >
            <div class="techpack-form__date-wrapper">
              <input
                type="date"
                id="deadline"
                name="deadline"
                class="techpack-form__input techpack-form__input--date"
                min="{{ 'now' | date: '%Y-%m-%d' }}"
                max="{{ 'now' | date: '%s' | plus: 31536000 | date: '%Y-%m-%d' }}"
              >
            </div>
            <div class="techpack-form__error" role="alert"></div>
          </div>
        </div>

        <!-- Row 5: Additional Notes (Full Width) -->
        <div class="techpack-form__row">
          <div class="techpack-form__group techpack-form__group--full">
            <label for="notes" class="techpack-form__label"
              >Project Details <span class="techpack-form__label-status">(optional)</span></label
            >
            <textarea
              id="notes"
              name="notes"
              class="techpack-form__textarea"
              rows="4"
              placeholder="Describe your project requirements, quantities, specific materials, or any other important details..."
            ></textarea>
          </div>
        </div>

        <div class="techpack-form__actions">
          <button type="button" class="techpack-btn techpack-btn--secondary" id="step-1-back">
            <svg class="techpack-btn__icon techpack-btn__icon--left" width="16" height="16" viewBox="0 0 16 16">
              <path d="M10 12l-4-4 4-4" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
            Back
          </button>
          <button type="button" class="techpack-btn techpack-btn--primary" id="step-1-next">
            Continue to Upload
            <svg class="techpack-btn__icon" width="16" height="16" viewBox="0 0 16 16">
              <path d="M6 12l4-4-4-4" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </button>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- Client Verification Modal -->
<div class="techpack-modal" id="client-verification-modal" style="display: none;">
  <div class="techpack-modal__backdrop"></div>
  <div class="techpack-modal__content techpack-modal__content--verification">
    <div class="techpack-modal__header">
      <h3 class="techpack-modal__title">Client Verification</h3>
      <button type="button" class="techpack-modal__close" id="close-client-modal">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path d="M15 5L5 15m0-10l10 10" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>
    <div class="techpack-modal__body">
      <div class="techpack-client-verification">
        <div class="techpack-client-verification__how-it-works">
          <h4 class="techpack-client-verification__how-it-works-title">How Genuine Blanks Works</h4>
          <div class="techpack-client-verification__steps">
            <div class="techpack-client-verification__step">
              <div class="techpack-client-verification__step-number">1</div>
              <div class="techpack-client-verification__step-content">
                <strong>Submit Your Tech Pack</strong>
                <p>Upload your design files and provide garment specifications through our streamlined process</p>
              </div>
            </div>
            <div class="techpack-client-verification__step">
              <div class="techpack-client-verification__step-number">2</div>
              <div class="techpack-client-verification__step-content">
                <strong>Quote & Approval</strong>
                <p>We review your requirements and provide a detailed quote within 24-48 hours</p>
              </div>
            </div>
            <div class="techpack-client-verification__step">
              <div class="techpack-client-verification__step-number">3</div>
              <div class="techpack-client-verification__step-content">
                <strong>Sample Production</strong>
                <p>We create samples for your approval before proceeding to full production</p>
              </div>
            </div>
            <div class="techpack-client-verification__step">
              <div class="techpack-client-verification__step-number">4</div>
              <div class="techpack-client-verification__step-content">
                <strong>Manufacturing & Delivery</strong>
                <p>Once approved, we manufacture your garments and deliver them to your specifications</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="techpack-client-verification__divider"></div>
        
        <p class="techpack-client-verification__description">
          Please select your client status to continue with the tech-pack submission process.
        </p>
        
        <div class="techpack-client-verification__options">
          <button type="button" class="techpack-client-verification__option" id="registration-yes-btn" data-registration="yes">
            <div class="techpack-client-verification__option-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <circle cx="12" cy="8" r="3" fill="currentColor"/>
                <path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" stroke="currentColor" stroke-width="2" fill="none"/>
              </svg>
            </div>
            <div class="techpack-client-verification__option-content">
              <h4 class="techpack-client-verification__option-title">Yes, I'm a Registered Client</h4>
              <p class="techpack-client-verification__option-description">
                I have worked with Genuine Blanks before and am registered in your system
              </p>
            </div>
          </button>
          
          <button type="button" class="techpack-client-verification__option" id="registration-no-btn" data-registration="no">
            <div class="techpack-client-verification__option-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                <path d="M12 1v6m0 6v6m-6-6h6m6 0h-6" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="techpack-client-verification__option-content">
              <h4 class="techpack-client-verification__option-title">No, I'm a New Client</h4>
              <p class="techpack-client-verification__option-description">
                This is my first time working with Genuine Blanks
              </p>
            </div>
          </button>
        </div>
        
        <!-- Registration Warning (initially hidden) -->
        <div class="techpack-warning registration-warning" id="registration-warning" style="display: none;">
          <div class="techpack-warning__icon">
            <svg width="20" height="20" viewBox="0 0 20 20">
              <path d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" fill="currentColor"/>
            </svg>
          </div>
          <div class="techpack-warning__content">
            <h5 class="techpack-warning__title">Registration Verification Required</h5>
            <p class="techpack-warning__message">
              We will verify your registration status during processing. If you're not registered in our system, 
              your submission will be automatically rejected. Please ensure you have worked with us before selecting this option.
            </p>
          </div>
        </div>
        
        <div class="techpack-client-verification__note">
          <svg width="16" height="16" viewBox="0 0 16 16">
            <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5" fill="none"/>
            <path d="M8 5v3l2 2" stroke="currentColor" stroke-width="1.5" fill="none"/>
          </svg>
          <span>VAT is only required for European countries</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Load TechPack Modular Application -->
<script src="{{ 'techpack-state.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'techpack-validation.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'techpack-mobile.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'techpack-core.js' | asset_url }}" defer="defer"></script>