{% comment %}
TechPack V10 Step 2: File Upload - Premium Studio Design
{% endcomment %}

{{ 'V10-techpack-studios.css' | asset_url | stylesheet_tag }}

<section id="techpack-v10-step-2" class="v10-techpack-step v10-hidden" data-step="2">
  <div class="techpack-container">
    
    <!-- Compact Progress Steps -->
    <div class="simple-progress-container">
      <div class="simple-progress-steps">
        <div class="simple-step completed">
          <div class="simple-step-circle">✓</div>
          <span>Client Info</span>
        </div>
        <div class="simple-step active">
          <div class="simple-step-circle">2</div>
          <span>Files</span>
        </div>
        <div class="simple-step">
          <div class="simple-step-circle">3</div>
          <span>Garments</span>
        </div>
        <div class="simple-step">
          <div class="simple-step-circle">4</div>
          <span>Review</span>
        </div>
      </div>
    </div>

    <div class="techpack-content">

    <!-- Header -->
    <div class="techpack-header-with-help">
      <div class="techpack-header-content">
        <h2 class="techpack-title">File Upload</h2>
        <p class="techpack-subtitle">Upload your tech pack files, designs, and reference materials</p>
      </div>
      
    </div>

    <!-- Upload Studio -->
    <div class="v10-studio-card">
      <!-- File Upload Warning -->
      <div class="v10-warning-box-enhanced v10-hidden" id="v10-file-upload-warning">
        <div class="v10-warning-icon">⚠️</div>
        <div class="v10-warning-content">
          <strong>File Upload Required</strong>
          Please upload at least one file to continue. Accepted formats: PDF, AI, PNG, JPG, ZIP (Max 10MB per file).
        </div>
      </div>

      <!-- Maximum Files Warning -->
      <div class="v10-warning-box-enhanced v10-hidden" id="v10-max-files-warning">
        <div class="v10-warning-icon">⚠️</div>
        <div class="v10-warning-content">
          <strong>Maximum Files Exceeded</strong>
          You can upload a maximum of 5 files per submission. Please remove some files to continue.
        </div>
      </div>

      <div class="v10-upload-zone" id="techpack-v10-upload-zone">
        <div class="v10-upload-content">
          <div class="v10-upload-icon">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
              <path d="M24 8V32M16 16L24 8L32 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 32V40C8 41.1046 8.89543 42 10 42H38C39.1046 42 40 41.1046 40 40V32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <h3 class="v10-upload-title">Drop files here to upload</h3>
          <p class="v10-upload-subtitle">or click to browse your computer</p>
          <div class="v10-upload-specs">
            <span class="v10-upload-spec">PDF, AI, PNG, JPG, ZIP</span>
            <span class="v10-upload-spec">•</span>
            <span class="v10-upload-spec">Max 10MB per file</span>
            <span class="v10-upload-spec">•</span>
            <span class="v10-upload-spec">Up to 5 files</span>
          </div>
        </div>
        <input type="file" id="techpack-v10-file-input" class="v10-upload-input" multiple accept=".pdf,.ai,.png,.jpg,.jpeg,.zip">
      </div>

      <div class="v10-upload-files" id="techpack-v10-uploaded-files"></div>

    </div>

    <!-- Measurement Requirements Studio (Conditional) -->
    <div class="v10-studio-card v10-measurement-compact v10-hidden" id="techpack-v10-measurement-studio">
      <div class="v10-studio-header">
        <h2 class="v10-studio-title">Measurement Requirements</h2>
        <p class="v10-studio-subtitle">Confirm which measurements are included in your tech pack files</p>
      </div>

      <div class="v10-measurement-list">
        <label class="v10-measurement-item">
          <div class="v10-measurement-text">
            <strong>Fit Measurements <span class="v10-measurement-status v10-measurement-status--required">REQUIRED</span></strong>
            <span>Body measurements or size charts</span>
          </div>
          <input type="checkbox" id="techpack-v10-fit-measurements" name="fit_measurements" class="v10-measurement-checkbox-input">
          <div class="v10-measurement-checkbox-custom">
            <svg class="v10-measurement-checkmark" width="14" height="14" viewBox="0 0 14 14">
              <path d="M11.5 3.5L5.5 9.5l-3-3" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </div>
        </label>

        <label class="v10-measurement-item">
          <div class="v10-measurement-text">
            <strong>Design Measurements <span class="v10-measurement-status v10-measurement-status--optional">OPTIONAL</span></strong>
            <span>Garment specifications</span>
          </div>
          <input type="checkbox" id="techpack-v10-design-measurements" name="design_measurements" class="v10-measurement-checkbox-input">
          <div class="v10-measurement-checkbox-custom">
            <svg class="v10-measurement-checkmark" width="14" height="14" viewBox="0 0 14 14">
              <path d="M11.5 3.5L5.5 9.5l-3-3" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </div>
        </label>

        <label class="v10-measurement-item v10-hidden" id="techpack-v10-design-placement-item">
          <div class="v10-measurement-text">
            <strong>Design Placement <span class="v10-measurement-status v10-measurement-status--optional">OPTIONAL</span></strong>
            <span>Logo and graphic positioning</span>
          </div>
          <input type="checkbox" id="techpack-v10-placement-measurements" name="design_placement_measurements" class="v10-measurement-checkbox-input">
          <div class="v10-measurement-checkbox-custom">
            <svg class="v10-measurement-checkmark" width="14" height="14" viewBox="0 0 14 14">
              <path d="M11.5 3.5L5.5 9.5l-3-3" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </div>
        </label>
      </div>

      <div class="v10-warning-box-enhanced v10-hidden" id="techpack-v10-measurement-warning">
        <div class="v10-warning-icon">⚠️</div>
        <div class="v10-warning-content">
          <strong>Important</strong>
          Requests with false measurement claims will be rejected. Only check boxes for measurements actually included in your tech pack files.
        </div>
      </div>
    </div>


    <!-- Action Buttons -->
    <div class="v10-step-actions">
      <button type="button" class="v10-btn v10-btn--secondary" id="techpack-v10-step-2-back">
        <svg class="v10-btn-icon v10-btn-icon--left" width="16" height="16" viewBox="0 0 16 16">
          <path d="M10 4L6 8l4 4" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
        Previous
      </button>
      
      <button type="button" class="v10-btn v10-btn--primary" id="techpack-v10-step-2-next">
        Continue to Garments
        <svg class="v10-btn-icon" width="16" height="16" viewBox="0 0 16 16">
          <path d="M6 12l4-4-4-4" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
      </button>
    </div>
    </div>
  </div>
</section>

<!-- File Item Template -->
<template id="techpack-v10-file-item-template">
  <div class="v10-file-card" data-file-id="">
    <div class="v10-file-header">
      <div class="v10-file-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
          <path d="M14 2V8H20" stroke="currentColor" stroke-width="2"/>
        </svg>
      </div>
      <div class="v10-file-info">
        <h4 class="v10-file-name"></h4>
        <p class="v10-file-size"></p>
      </div>
      <button type="button" class="v10-file-remove" aria-label="Remove file">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>


    <div class="v10-file-progress v10-hidden">
      <div class="v10-progress-bar">
        <div class="v10-progress-fill"></div>
      </div>
      <span class="v10-progress-text">Uploading...</span>
    </div>
  </div>
</template>

<!-- Measurement Warning Modal -->
<div class="v10-modal-overlay v10-hidden" id="techpack-v10-measurement-warning-modal">
  <div class="v10-modal">
    <div class="v10-modal-header">
      <div class="v10-modal-icon v10-modal-icon--warning">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
        </svg>
      </div>
      <h3 class="v10-modal-title" id="techpack-v10-warning-title">Measurement Check</h3>
      <button type="button" class="v10-modal-close" id="v10-close-warning-modal">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path d="M15 5L5 15M5 5l10 10" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>

    <div class="v10-modal-body">
      <p class="v10-modal-message" id="techpack-v10-warning-message">
        <!-- Dynamic message content -->
      </p>

      <div class="v10-modal-details" id="techpack-v10-warning-details">
        <!-- Dynamic details content -->
      </div>
    </div>

    <div class="v10-modal-actions">
      <button type="button" class="v10-btn v10-btn--ghost" id="techpack-v10-warning-back">
        Add Measurements
      </button>
      <button type="button" class="v10-btn v10-btn--primary v10-hidden" id="techpack-v10-warning-proceed">
        Skip for Now
      </button>
    </div>
  </div>
</div>

<!-- Measurement Confirmation Modal -->
<div class="v10-modal-overlay v10-hidden" id="techpack-v10-measurement-modal">
  <div class="v10-modal v10-modal--measurement">
    <div class="v10-modal-header">
      <div class="v10-modal-icon v10-modal-icon--warning">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
        </svg>
      </div>
      <h3 class="v10-modal-title" id="v10-measurement-modal-title">Measurement Check</h3>
      <button type="button" class="v10-modal-close" id="v10-close-measurement-modal">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path d="M15 5L5 15M5 5l10 10" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>

    <div class="v10-modal-body">
      <p class="v10-modal-message" id="v10-measurement-modal-message">
        <!-- Dynamic message content -->
      </p>

      <div class="v10-modal-details" id="v10-measurement-modal-details">
        <!-- Dynamic details content -->
      </div>
    </div>

    <div class="v10-modal-actions">
      <button type="button" class="v10-btn v10-btn--ghost" id="v10-measurement-modal-back">
        Add Measurements
      </button>
      <button type="button" class="v10-btn v10-btn--ghost v10-hidden" id="v10-measurement-modal-proceed">
        Skip for Now
      </button>
    </div>
  </div>
</div>

<!-- Load TechPack V10 Application -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{{ 'V10-techpack-studios.js' | asset_url }}?v={{ 'now' | date: '%s' }}" defer="defer"></script>

{% schema %}
{
  "name": "TechPack V10 Step 2",
  "settings": [
    {
      "type": "header",
      "content": "File Upload Step"
    },
    {
      "type": "text",
      "id": "step_title",
      "label": "Step Title",
      "default": "File Upload"
    },
    {
      "type": "text",
      "id": "step_subtitle",
      "label": "Step Subtitle",
      "default": "Professional drag & drop interface with intelligent file classification"
    },
    {
      "type": "number",
      "id": "max_file_size",
      "label": "Max File Size (MB)",
      "default": 10
    },
    {
      "type": "number",
      "id": "max_files",
      "label": "Max Number of Files",
      "default": 10
    }
  ],
  "presets": [
    {
      "name": "TechPack V10 Step 2"
    }
  ]
}
{% endschema %}