{{ 'futuristic-slider.css' | asset_url | stylesheet_tag }}

<div class="futuristic-slider" data-section-id="{{ section.id }}">
  <div class="futuristic-slider__container">
    <div class="swiper futuristic-swiper" data-autoplay="{{ section.settings.autoplay }}" data-speed="{{ section.settings.autoplay_speed }}">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div class="swiper-slide futuristic-slide" {{ block.shopify_attributes }}>
            <div class="futuristic-slide__media">
              {% if block.settings.media_type == 'video' and block.settings.video_url != blank %}
                <div class="futuristic-slide__video-wrapper">
                  <video class="futuristic-slide__video" autoplay muted loop playsinline>
                    <source src="{{ block.settings.video_url }}" type="video/mp4">
                  </video>
                </div>
              {% elsif block.settings.image != blank %}
                <div class="futuristic-slide__image-wrapper">
                  {{ block.settings.image | image_url: width: 2048 | image_tag: class: 'futuristic-slide__image', loading: 'lazy' }}
                </div>
              {% endif %}
              <div class="futuristic-slide__overlay"></div>
            </div>
            
            {% if block.settings.heading != blank or block.settings.subheading != blank %}
              <div class="futuristic-slide__content">
                <div class="futuristic-slide__content-inner">
                  {% if block.settings.heading != blank %}
                    <h2 class="futuristic-slide__heading">{{ block.settings.heading }}</h2>
                  {% endif %}
                  {% if block.settings.subheading != blank %}
                    <div class="futuristic-slide__subheading">{{ block.settings.subheading }}</div>
                  {% endif %}
                  {% if block.settings.button_text != blank and block.settings.button_url != blank %}
                    <a href="{{ block.settings.button_url }}" class="futuristic-slide__button">{{ block.settings.button_text }}</a>
                  {% endif %}
                </div>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
      
      {% if section.blocks.size > 1 %}
        <div class="futuristic-slider__navigation">
          <button class="futuristic-slider__nav futuristic-slider__nav--prev swiper-button-prev">‹</button>
          <button class="futuristic-slider__nav futuristic-slider__nav--next swiper-button-next">›</button>
        </div>
        <div class="futuristic-slider__pagination swiper-pagination"></div>
      {% endif %}
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">

<script>
document.addEventListener('DOMContentLoaded', function() {
  new Swiper('.futuristic-swiper', {
    loop: true,
    autoplay: {{ section.settings.autoplay | json }},
    navigation: {
      nextEl: '.futuristic-slider__nav--next',
      prevEl: '.futuristic-slider__nav--prev',
    },
    pagination: {
      el: '.futuristic-slider__pagination',
      clickable: true,
    },
  });
});
</script>

{% schema %}
{
  "name": "Futuristic Slider",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Auto-rotate slides",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 3,
      "max": 10,
      "step": 1,
      "unit": "s",
      "label": "Change slides every",
      "default": 5
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "select",
          "id": "media_type",
          "label": "Media type",
          "options": [
            {
              "value": "image",
              "label": "Image"
            },
            {
              "value": "video",
              "label": "Video"
            }
          ],
          "default": "image"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "video_url",
          "label": "Video URL"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Slide heading"
        },
        {
          "type": "textarea",
          "id": "subheading",
          "label": "Subheading"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text"
        },
        {
          "type": "url",
          "id": "button_url",
          "label": "Button link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Futuristic Slider",
      "blocks": [
        {
          "type": "slide",
          "settings": {
            "heading": "Welcome to the Future",
            "subheading": "Experience innovation like never before"
          }
        }
      ]
    }
  ]
}
{% endschema %}