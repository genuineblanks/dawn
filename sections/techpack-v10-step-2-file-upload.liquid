{% comment %}
TechPack V10 Step 2: File Upload - Premium Studio Design
{% endcomment %}

{{ 'V10-techpack-studios.css' | asset_url | stylesheet_tag }}

<section id="techpack-v10-step-2" class="v10-techpack-step" data-step="2" style="display: none;">
  <div class="techpack-container">
    
    <!-- Simple Progress Bar -->
    <div class="techpack-progress" data-step="2">
      <div class="techpack-progress__bar">
        <div class="techpack-progress__fill" style="width: 50%"></div>
      </div>
      <div class="techpack-progress__steps">
        <div class="techpack-progress__step techpack-progress__step--completed">
          <div class="techpack-progress__step-circle techpack-progress__step-circle--completed">‚úì</div>
          <div class="techpack-progress__step-label">Client Info</div>
        </div>
        <div class="techpack-progress__step techpack-progress__step--active">
          <div class="techpack-progress__step-circle techpack-progress__step-circle--active">2</div>
          <div class="techpack-progress__step-label">Files</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">3</div>
          <div class="techpack-progress__step-label">Garments</div>
        </div>
        <div class="techpack-progress__step">
          <div class="techpack-progress__step-circle">4</div>
          <div class="techpack-progress__step-label">Review</div>
        </div>
      </div>
    </div>

    <div class="techpack-content">

    <!-- Header -->
    <div class="techpack-header-with-help">
      <div class="techpack-header-content">
        <h2 class="techpack-title">File Upload</h2>
        <p class="techpack-subtitle">Upload your tech pack files, designs, and reference materials</p>
      </div>
    </div>

    <!-- Upload Studio -->
    <div class="v10-studio-card">
      <div class="v10-upload-zone" id="techpack-v10-upload-zone">
        <div class="v10-upload-content">
          <div class="v10-upload-icon">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
              <path d="M24 8V32M16 16L24 8L32 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 32V40C8 41.1046 8.89543 42 10 42H38C39.1046 42 40 41.1046 40 40V32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <h3 class="v10-upload-title">Drop files here to upload</h3>
          <p class="v10-upload-subtitle">or click to browse your computer</p>
          <div class="v10-upload-specs">
            <span class="v10-upload-spec">PDF, AI, PNG, JPG, ZIP</span>
            <span class="v10-upload-spec">‚Ä¢</span>
            <span class="v10-upload-spec">Max 10MB per file</span>
            <span class="v10-upload-spec">‚Ä¢</span>
            <span class="v10-upload-spec">Up to 10 files</span>
          </div>
        </div>
        <input type="file" id="techpack-v10-file-input" class="v10-upload-input" multiple accept=".pdf,.ai,.png,.jpg,.jpeg,.zip">
      </div>

      <div class="v10-upload-files" id="techpack-v10-uploaded-files"></div>

      <button type="button" class="v10-btn v10-btn--ghost v10-btn--add-files" id="techpack-v10-add-more-files" style="display: none;">
        <svg class="v10-btn-icon v10-btn-icon--left" width="16" height="16" viewBox="0 0 16 16">
          <path d="M8 2V14M2 8H14" stroke="currentColor" stroke-width="2"/>
        </svg>
        Add More Files
      </button>
    </div>

    <!-- Measurement Requirements Studio (Conditional) -->
    <div class="v10-studio-card v10-measurement-compact" id="techpack-v10-measurement-studio" style="display: none;">
      <div class="v10-studio-header">
        <h2 class="v10-studio-title">Measurement Requirements</h2>
        <p class="v10-studio-subtitle">Confirm which measurements are included in your tech pack files</p>
      </div>

      <div class="v10-measurement-list">
        <label class="v10-measurement-item">
          <div class="v10-measurement-text">
            <strong>Fit Measurements</strong>
            <span>Body measurements or size charts</span>
          </div>
          <input type="checkbox" id="techpack-v10-fit-measurements" name="fit_measurements" class="v10-measurement-checkbox-input">
          <div class="v10-measurement-checkbox-custom">
            <svg class="v10-measurement-checkmark" width="14" height="14" viewBox="0 0 14 14">
              <path d="M11.5 3.5L5.5 9.5l-3-3" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </div>
        </label>

        <label class="v10-measurement-item">
          <div class="v10-measurement-text">
            <strong>Design Measurements</strong>
            <span>Garment specifications</span>
          </div>
          <input type="checkbox" id="techpack-v10-design-measurements" name="design_measurements" class="v10-measurement-checkbox-input">
          <div class="v10-measurement-checkbox-custom">
            <svg class="v10-measurement-checkmark" width="14" height="14" viewBox="0 0 14 14">
              <path d="M11.5 3.5L5.5 9.5l-3-3" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </div>
        </label>

        <label class="v10-measurement-item" id="techpack-v10-design-placement-item" style="display: none;">
          <div class="v10-measurement-text">
            <strong>Design Placement</strong>
            <span>Logo and graphic positioning</span>
          </div>
          <input type="checkbox" id="techpack-v10-placement-measurements" name="design_placement_measurements" class="v10-measurement-checkbox-input">
          <div class="v10-measurement-checkbox-custom">
            <svg class="v10-measurement-checkmark" width="14" height="14" viewBox="0 0 14 14">
              <path d="M11.5 3.5L5.5 9.5l-3-3" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </div>
        </label>
      </div>

      <div class="v10-measurement-warning" id="techpack-v10-measurement-warning" style="display: none;">
        <div class="v10-warning-icon">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92z" fill="currentColor"/>
            <path d="M10 7V11M10 13H10.01" stroke="white" stroke-width="2"/>
          </svg>
        </div>
        <div class="v10-warning-content">
          <p class="v10-warning-text">
            <strong>Important:</strong> Requests with false measurement claims will be rejected. Only check boxes for measurements actually included in your tech pack files.
          </p>
        </div>
      </div>
    </div>

    <!-- File Classification Studio -->
    <div class="v10-studio-card" id="techpack-v10-classification-studio" style="display: none;">
      <div class="v10-studio-header">
        <h2 class="v10-studio-title">File Classification</h2>
        <p class="v10-studio-subtitle">Help us organize your files by specifying their types</p>
      </div>

      <div class="v10-classification-grid" id="techpack-v10-classification-grid">
        <!-- Files will be dynamically added here -->
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="v10-step-actions">
      <button type="button" class="v10-btn v10-btn--ghost" id="techpack-v10-step-2-back">
        <svg class="v10-btn-icon v10-btn-icon--left" width="16" height="16" viewBox="0 0 16 16">
          <path d="M10 4L6 8l4 4" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
        Previous
      </button>
      
      <button type="button" class="v10-btn v10-btn--primary" id="techpack-v10-step-2-next" disabled>
        Continue to Garments
        <svg class="v10-btn-icon" width="16" height="16" viewBox="0 0 16 16">
          <path d="M6 12l4-4-4-4" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
      </button>
    </div>
    </div>
  </div>
</section>

<!-- File Item Template -->
<template id="techpack-v10-file-item-template">
  <div class="v10-file-card" data-file-id="">
    <div class="v10-file-header">
      <div class="v10-file-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
          <path d="M14 2V8H20" stroke="currentColor" stroke-width="2"/>
        </svg>
      </div>
      <div class="v10-file-info">
        <h4 class="v10-file-name"></h4>
        <p class="v10-file-size"></p>
      </div>
      <button type="button" class="v10-file-remove" aria-label="Remove file">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>

    <div class="v10-file-classification">
      <label class="v10-form-label">
        File Type *
        <select class="v10-form-select v10-file-type-select" required>
          <option value="">‚ö†Ô∏è Select file type (required)</option>
          <option value="Collection">üìÅ Collection Tech-Pack</option>
          <option value="Single">üìÑ Single Garment Tech-Pack</option>
          <option value="Design">üé® Design Reference Files</option>
          <option value="Accessories">üè∑Ô∏è Accessories Reference Files</option>
        </select>
      </label>
      <div class="v10-form-error" style="display: none;"></div>
    </div>

    <div class="v10-file-progress" style="display: none;">
      <div class="v10-progress-bar">
        <div class="v10-progress-fill" style="width: 0%"></div>
      </div>
      <span class="v10-progress-text">Uploading...</span>
    </div>
  </div>
</template>

<!-- Measurement Warning Modal -->
<div class="v10-modal-overlay" id="techpack-v10-measurement-warning-modal" style="display: none;">
  <div class="v10-modal">
    <div class="v10-modal-header">
      <div class="v10-modal-icon v10-modal-icon--warning">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" stroke="currentColor" stroke-width="2"/>
          <path d="M12 9V13M12 17H12.01" stroke="currentColor" stroke-width="2"/>
        </svg>
      </div>
      <h3 class="v10-modal-title" id="techpack-v10-warning-title">Missing Measurements</h3>
    </div>
    
    <div class="v10-modal-body">
      <p class="v10-modal-message" id="techpack-v10-warning-message">
        <!-- Dynamic message content -->
      </p>
      
      <div class="v10-modal-details" id="techpack-v10-warning-details">
        <!-- Dynamic details content -->
      </div>
    </div>
    
    <div class="v10-modal-actions">
      <button type="button" class="v10-btn v10-btn--ghost" id="techpack-v10-warning-back">
        Go Back & Add Measurements
      </button>
      <button type="button" class="v10-btn v10-btn--primary" id="techpack-v10-warning-proceed" style="display: none;">
        Continue Anyway
      </button>
    </div>
  </div>
</div>

<!-- Measurement Confirmation Modal -->
<div class="v10-modal-overlay" id="techpack-v10-measurement-modal" style="display: none;">
  <div class="v10-modal v10-modal--measurement">
    <div class="v10-modal-header">
      <div class="v10-modal-icon v10-modal-icon--warning">
        <svg width="24" height="24" viewBox="0 0 24 24">
          <path d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92z" fill="currentColor"/>
          <path d="M12 9V13M12 17H12.01" stroke="white" stroke-width="2"/>
        </svg>
      </div>
      <h3 class="v10-modal-title" id="v10-measurement-modal-title">Missing Measurements</h3>
    </div>
    
    <div class="v10-modal-body">
      <p class="v10-modal-message" id="v10-measurement-modal-message">
        <!-- Dynamic message content -->
      </p>
      
      <div class="v10-modal-details" id="v10-measurement-modal-details">
        <!-- Dynamic details content -->
      </div>
    </div>
    
    <div class="v10-modal-actions">
      <button type="button" class="v10-btn v10-btn--ghost" id="v10-measurement-modal-back">
        Go Back & Add Measurements
      </button>
      <button type="button" class="v10-btn v10-btn--primary" id="v10-measurement-modal-proceed" style="display: none;">
        Continue Anyway
      </button>
    </div>
  </div>
</div>

<!-- Load TechPack V10 Application -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{{ 'V10-techpack-studios.js' | asset_url }}?v=10.0.0" defer="defer"></script>

{% schema %}
{
  "name": "TechPack V10 Step 2",
  "settings": [
    {
      "type": "header",
      "content": "File Upload Step"
    },
    {
      "type": "text",
      "id": "step_title",
      "label": "Step Title",
      "default": "File Upload"
    },
    {
      "type": "text",
      "id": "step_subtitle",
      "label": "Step Subtitle",
      "default": "Professional drag & drop interface with intelligent file classification"
    },
    {
      "type": "number",
      "id": "max_file_size",
      "label": "Max File Size (MB)",
      "default": 10
    },
    {
      "type": "number",
      "id": "max_files",
      "label": "Max Number of Files",
      "default": 10
    }
  ],
  "presets": [
    {
      "name": "TechPack V10 Step 2"
    }
  ]
}
{% endschema %}