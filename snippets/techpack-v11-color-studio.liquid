{% comment %}
  TechPack V11 - Color Studio

  Side panel for Pantone color selection and lab dip management
  Opens when "Pantone Library" sample type is selected

  Features:
  - Pantone search and selection
  - Lab dip collection management
  - Drag & drop lab dip assignment to garments
  - Visual color previews
{% endcomment %}

<div id="colorStudio" class="color-studio" style="display: none;">
  <div class="color-studio-overlay" data-action="close-color-studio"></div>

  <div class="color-studio-panel">

    {%- comment -%} HEADER {%- endcomment -%}
    <div class="color-studio-header">
      <h2 class="color-studio-title">Color Studio</h2>
      <button type="button" class="color-studio-close" data-action="close-color-studio">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M6 6L18 18M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    {%- comment -%} MAIN CONTENT - TWO COLUMN LAYOUT {%- endcomment -%}
    <div class="color-studio-content">

      {%- comment -%} LEFT PANEL: COLOR SELECTION {%- endcomment -%}
      <div class="color-studio-left">
        <h3 class="color-studio-section-title">Select Your Color</h3>

        {%- comment -%} CURRENT SELECTION DISPLAY {%- endcomment -%}
        <div id="currentColorDisplay" class="current-color-display">
          <div id="currentColorSwatch" class="current-color-swatch" style="background-color: #EC4899;">
            <svg class="current-color-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
              <circle cx="16" cy="16" r="14" stroke="white" stroke-width="2"/>
            </svg>
          </div>
          <div class="current-color-info">
            <p id="currentColorName" class="current-color-name">Pink</p>
            <p id="currentColorCode" class="current-color-code">17-2034 TPX</p>
          </div>
        </div>

        {%- comment -%} PANTONE CODE INPUT {%- endcomment -%}
        <div class="form-field">
          <label for="pantoneCodeInput" class="form-label">Pantone Code</label>
          <div class="pantone-input-group">
            <input
              type="text"
              id="pantoneCodeInput"
              class="form-input"
              placeholder="e.g., 17-2034"
              data-action="search-pantone"
            />
            <button type="button" class="button-search-pantone" data-action="search-pantone-button">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <circle cx="9" cy="9" r="6" stroke="currentColor" stroke-width="2" fill="none"/>
                <path d="M13 13L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
          <p class="form-helper-text">Search by Pantone code to find exact color</p>
        </div>

        {%- comment -%} POPULAR COLORS {%- endcomment -%}
        <div class="popular-colors-section">
          <h4 class="popular-colors-title">Popular Colors</h4>
          <div class="popular-colors-grid" id="popularColorsGrid">
            {%- comment -%} Populated by JavaScript with 18 popular Pantone colors {%- endcomment -%}
          </div>
        </div>

        {%- comment -%} ADVANCED COLOR PICKER {%- endcomment -%}
        <div class="advanced-picker-section">
          <h4 class="advanced-picker-title">Advanced Color Picker</h4>
          <p class="advanced-picker-description">Find closest Pantone match</p>

          <div class="color-sliders">
            <div class="color-slider">
              <label for="hueSlider" class="slider-label">
                Hue
                <span id="hueValue" class="slider-value">0</span>
              </label>
              <input
                type="range"
                id="hueSlider"
                class="slider"
                min="0"
                max="360"
                value="0"
                data-action="update-color-picker"
              />
            </div>

            <div class="color-slider">
              <label for="saturationSlider" class="slider-label">
                Saturation
                <span id="saturationValue" class="slider-value">100%</span>
              </label>
              <input
                type="range"
                id="saturationSlider"
                class="slider"
                min="0"
                max="100"
                value="100"
                data-action="update-color-picker"
              />
            </div>

            <div class="color-slider">
              <label for="lightnessSlider" class="slider-label">
                Lightness
                <span id="lightnessValue" class="slider-value">50%</span>
              </label>
              <input
                type="range"
                id="lightnessSlider"
                class="slider"
                min="0"
                max="100"
                value="50"
                data-action="update-color-picker"
              />
            </div>
          </div>

          <div id="closestPantoneMatch" class="closest-pantone-match">
            <p class="closest-pantone-label">Closest Pantone Match:</p>
            <div id="closestPantoneDisplay" class="closest-pantone-display">
              {%- comment -%} Populated by JavaScript {%- endcomment -%}
            </div>
          </div>
        </div>

        {%- comment -%} ADD TO COLLECTION BUTTON {%- endcomment -%}
        <button type="button" class="button button--primary button--full-width" data-action="add-to-lab-dip-collection">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Add to Lab Dip Collection
        </button>

      </div>

      {%- comment -%} RIGHT PANEL: LAB DIP COLLECTION {%- endcomment -%}
      <div class="color-studio-right">
        <h3 class="color-studio-section-title">Lab Dip Collection</h3>
        <p class="color-studio-section-description">Drag colors to garments below or use dropdown</p>

        {%- comment -%} LAB DIP LIST {%- endcomment -%}
        <div id="labDipList" class="lab-dip-list">
          {%- comment -%} EMPTY STATE {%- endcomment -%}
          <div id="labDipEmptyState" class="lab-dip-empty-state">
            <svg class="lab-dip-empty-icon" width="64" height="64" viewBox="0 0 64 64" fill="none">
              <rect x="10" y="10" width="44" height="44" rx="4" stroke="currentColor" stroke-width="3" fill="none"/>
              <line x1="10" y1="22" x2="54" y2="22" stroke="currentColor" stroke-width="3"/>
              <line x1="10" y1="32" x2="54" y2="32" stroke="currentColor" stroke-width="3"/>
              <line x1="10" y1="42" x2="54" y2="42" stroke="currentColor" stroke-width="3"/>
            </svg>
            <p class="lab-dip-empty-text">No lab dips added yet</p>
            <p class="lab-dip-empty-hint">Select colors from the left to build your collection</p>
          </div>

          {%- comment -%} LAB DIP CARDS (populated by JS) {%- endcomment -%}
          <div id="labDipCards" class="lab-dip-cards">
            {%- comment -%} Populated by JavaScript {%- endcomment -%}
          </div>
        </div>

      </div>

    </div>

    {%- comment -%} BOTTOM: GARMENTS WITH DRAG & DROP {%- endcomment -%}
    <div class="color-studio-bottom">
      <h3 class="color-studio-section-title">Assign Colors to Garments</h3>
      <p class="color-studio-section-description">Drag lab dips onto garments or use the dropdown menu</p>

      <div id="colorStudioGarments" class="color-studio-garments">
        {%- comment -%} Populated by JavaScript with garments needing colors {%- endcomment -%}
      </div>
    </div>

    {%- comment -%} FOOTER ACTIONS {%- endcomment -%}
    <div class="color-studio-footer">
      <button type="button" class="button button--secondary" data-action="cancel-color-studio">
        Cancel
      </button>
      <button type="button" class="button button--primary" data-action="done-color-studio">
        Done
      </button>
    </div>

  </div>
</div>
