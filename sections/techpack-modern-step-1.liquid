{{ 'techpack-app-modern.css' | asset_url | stylesheet_tag }}

<div class="tech-pack-app" data-section-id="{{ section.id }}">
  <!-- Header -->
  <div class="app-header">
    <div class="container">
      <h1 class="app-title">{{ section.settings.title | default: 'Tech Pack Submission' }}</h1>
      <p class="app-subtitle">{{ section.settings.subtitle | default: 'Professional garment development made simple' }}</p>
    </div>
  </div>

  <!-- Progress -->
  <div class="progress-container">
    <div class="container">
      <div class="progress-wrapper">
        <div class="progress-track">
          <div class="progress-fill"></div>
        </div>
        <div class="progress-steps">
          <span class="progress-step active">Client Info</span>
          <span class="progress-step">File Upload</span>
          <span class="progress-step">Garment Specs</span>
          <span class="progress-step">Review & Submit</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Step 1: Client Info -->
  <div class="step active" data-step="1">
    <div class="container">
      <div class="step-header">
        <h2 class="step-title">Client Information</h2>
        <p class="step-description">Tell us about your business and project requirements</p>
      </div>

      <form class="tech-pack-form" autocomplete="off">
        <!-- Client Name & Company -->
        <div class="form-row">
          <div class="form-group">
            <label for="client-name" class="form-label">Contact Name *</label>
            <input
              type="text"
              id="client-name"
              name="clientName"
              class="form-input"
              placeholder="Your full name"
              required
            >
          </div>
          <div class="form-group">
            <label for="company-name" class="form-label">Business/Brand Name *</label>
            <input
              type="text"
              id="company-name"
              name="companyName"
              class="form-input"
              placeholder="Your business or brand name"
              required
            >
          </div>
        </div>

        <!-- Email & VAT/EIN -->
        <div class="form-row">
          <div class="form-group">
            <label for="email" class="form-label">Business Email *</label>
            <input
              type="email"
              id="email"
              name="email"
              class="form-input"
              placeholder="contact@yourbusiness.com"
              required
            >
          </div>
          <div class="form-group" id="vat-ein-group">
            <label for="vat-ein" class="form-label">VAT/Tax Number</label>
            <input
              type="text"
              id="vat-ein"
              name="vatEin"
              class="form-input"
              placeholder="Optional"
            >
            <div class="form-help">
              Required for certain countries (VAT for EU, EIN for US)
            </div>
          </div>
        </div>

        <!-- Phone & Country -->
        <div class="form-row">
          <div class="form-group">
            <label for="phone" class="form-label">Business Phone</label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="form-input"
              placeholder="+1 234 567 8901"
            >
          </div>
          <div class="form-group">
            <label for="country" class="form-label">Business Location *</label>
            <select id="country" name="country" class="form-input" required>
              <option value="">Select your country</option>
              <optgroup label="Major Markets">
                <option value="US">United States</option>
                <option value="GB">United Kingdom</option>
                <option value="CA">Canada</option>
                <option value="AU">Australia</option>
              </optgroup>
              <optgroup label="European Union">
                <option value="DE">Germany</option>
                <option value="FR">France</option>
                <option value="IT">Italy</option>
                <option value="ES">Spain</option>
                <option value="NL">Netherlands</option>
                <option value="BE">Belgium</option>
                <option value="PT">Portugal</option>
                <option value="AT">Austria</option>
                <option value="IE">Ireland</option>
                <option value="DK">Denmark</option>
                <option value="SE">Sweden</option>
                <option value="FI">Finland</option>
              </optgroup>
              <optgroup label="Other Countries">
                <option value="BR">Brazil</option>
                <option value="MX">Mexico</option>
                <option value="JP">Japan</option>
                <option value="KR">South Korea</option>
                <option value="SG">Singapore</option>
                <option value="CH">Switzerland</option>
                <option value="NO">Norway</option>
                <option value="NZ">New Zealand</option>
                <option value="ZA">South Africa</option>
                <option value="other">Other</option>
              </optgroup>
            </select>
          </div>
        </div>

        <!-- Production Type & Deadline -->
        <div class="form-row">
          <div class="form-group">
            <label for="production-type" class="form-label">Production Type *</label>
            <select id="production-type" name="productionType" class="form-input" required>
              <option value="">Select production type</option>
              <option value="our-blanks">Our Blanks</option>
              <option value="custom-production">Custom Production</option>
            </select>
          </div>
          <div class="form-group">
            <label for="deadline" class="form-label">Target Deadline</label>
            <input
              type="date"
              id="deadline"
              name="deadline"
              class="form-input"
              min="{{ 'now' | date: '%Y-%m-%d' }}"
            >
          </div>
        </div>

        <!-- Project Notes -->
        <div class="form-group">
          <label for="notes" class="form-label">Project Details</label>
          <textarea
            id="notes"
            name="notes"
            class="form-input"
            rows="4"
            placeholder="Describe your project requirements, quantities, materials, or any other important details..."
          ></textarea>
        </div>

        <!-- Navigation -->
        <div class="step-navigation">
          <button type="button" class="btn btn-secondary" id="prev-step-btn" disabled>
            Previous
          </button>
          <button type="button" class="btn btn-primary" id="next-step-btn">
            Next Step
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Step 2: File Upload -->
  <div class="step" data-step="2">
    <div class="container">
      <div class="step-header">
        <h2 class="step-title">File Upload</h2>
        <p class="step-description">Upload your design files, references, and specifications</p>
      </div>

      <!-- Upload Guidelines -->
      <div class="upload-guidelines">
        <div class="upload-guideline">
          <div class="upload-guideline__icon">üìÅ</div>
          <div class="upload-guideline__content">
            <strong>Accepted Files</strong>
            <span>PDF, AI, PNG, JPG, JPEG, ZIP</span>
          </div>
        </div>
        <div class="upload-guideline">
          <div class="upload-guideline__icon">üìè</div>
          <div class="upload-guideline__content">
            <strong>File Size</strong>
            <span>Maximum 10MB per file</span>
          </div>
        </div>
        <div class="upload-guideline">
          <div class="upload-guideline__icon">üìä</div>
          <div class="upload-guideline__content">
            <strong>File Limit</strong>
            <span>Up to 10 files total</span>
          </div>
        </div>
      </div>

      <!-- Upload Area -->
      <div class="file-upload-zone" id="file-upload-zone">
        <input type="file" id="file-input" multiple accept=".pdf,.ai,.png,.jpg,.jpeg,.zip" style="display: none;">
        
        <div class="file-upload-content">
          <div class="file-upload-icon">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
              <path d="M24 8v24m-8-8l8-8 8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 24v12a4 4 0 004 4h24a4 4 0 004-4V24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          
          <div class="file-upload-text">
            <strong>Click to upload</strong> or drag and drop your files here
          </div>
          
          <div class="file-upload-hint">
            Tech packs, designs, references, specifications
          </div>
        </div>

        <div class="file-upload-dragover" style="display: none;">
          <div class="file-upload-dragover__content">
            <div class="file-upload-dragover__icon">‚¨áÔ∏è</div>
            <strong>Drop your files here</strong>
          </div>
        </div>
      </div>

      <!-- File Categories (Optional) -->
      <div class="file-categories">
        <h3 class="file-categories__title">File Categories</h3>
        <div class="file-categories__list">
          <button type="button" class="file-category" data-category="designs">
            <span class="file-category__icon">üé®</span>
            <span class="file-category__label">Designs</span>
            <span class="file-category__count">0</span>
          </button>
          <button type="button" class="file-category" data-category="references">
            <span class="file-category__icon">üì∑</span>
            <span class="file-category__label">References</span>
            <span class="file-category__count">0</span>
          </button>
          <button type="button" class="file-category" data-category="techpack">
            <span class="file-category__icon">üìã</span>
            <span class="file-category__label">Tech Pack</span>
            <span class="file-category__count">0</span>
          </button>
          <button type="button" class="file-category" data-category="other">
            <span class="file-category__icon">üìÑ</span>
            <span class="file-category__label">Other</span>
            <span class="file-category__count">0</span>
          </button>
        </div>
      </div>

      <!-- File List -->
      <div class="file-list-container">
        <div class="file-list-header">
          <h3>Uploaded Files (<span id="file-count">0</span>/10)</h3>
          <button type="button" class="btn btn-clear" id="clear-all-files" style="display: none;">
            Clear All
          </button>
        </div>
        <div class="file-list" id="file-list"></div>
      </div>

      <div class="step-navigation">
        <button type="button" class="btn btn-secondary" id="prev-step-btn">
          Previous
        </button>
        <button type="button" class="btn btn-primary" id="next-step-btn">
          Next Step
        </button>
      </div>
    </div>
  </div>

  <!-- Step 3: Garment Specs -->
  <div class="step" data-step="3">
    <div class="container">
      <div class="step-header">
        <h2 class="step-title">Garment Specifications</h2>
        <p class="step-description">Define your garment types, colorways, and quantities</p>
      </div>

      <!-- Production Info -->
      <div class="production-info" id="production-info">
        <div class="production-info__content">
          <h3>Production Details</h3>
          <div class="production-info__details">
            <span class="production-type-display">Production type will be shown here</span>
            <span class="minimum-quantity-display">Minimum quantities will be calculated</span>
          </div>
        </div>
      </div>

      <!-- Garment Controls -->
      <div class="garment-controls">
        <button type="button" class="btn btn-primary" id="add-garment-btn">
          <span class="btn-icon">‚ûï</span>
          Add Garment Type
        </button>
        <div class="garment-summary" id="garment-summary">
          <span class="garment-count">0 garments</span>
          <span class="total-quantity">0 total pieces</span>
        </div>
      </div>

      <!-- Garment List -->
      <div class="garment-list" id="garment-list">
        <div class="garment-list-empty">
          <div class="garment-list-empty__icon">üëï</div>
          <p>No garments added yet</p>
          <p class="garment-list-empty__hint">Click "Add Garment Type" to start defining your products</p>
        </div>
      </div>

      <!-- Quantity Validation -->
      <div class="quantity-validation" id="quantity-validation" style="display: none;">
        <div class="quantity-validation__content">
          <div class="quantity-validation__status"></div>
          <div class="quantity-validation__details"></div>
        </div>
      </div>

      <div class="step-navigation">
        <button type="button" class="btn btn-secondary" id="prev-step-btn">
          Previous
        </button>
        <button type="button" class="btn btn-primary" id="next-step-btn">
          Next Step
        </button>
      </div>
    </div>
  </div>

  <!-- Step 4: Review & Submit -->
  <div class="step" data-step="4">
    <div class="container">
      <div class="step-header">
        <h2 class="step-title">Review & Submit</h2>
        <p class="step-description">Review all your information before submitting your tech pack</p>
      </div>

      <!-- Review Sections -->
      <div class="review-container">
        
        <!-- Client Information Review -->
        <div class="review-section" id="review-client">
          <div class="review-section__header">
            <h3 class="review-section__title">
              <span class="review-section__icon">üë§</span>
              Client Information
            </h3>
            <button type="button" class="review-section__edit" data-edit-step="1">
              Edit
            </button>
          </div>
          <div class="review-section__content" id="review-client-content">
            <!-- Content will be populated by JavaScript -->
          </div>
        </div>

        <!-- Files Review -->
        <div class="review-section" id="review-files">
          <div class="review-section__header">
            <h3 class="review-section__title">
              <span class="review-section__icon">üìÅ</span>
              Uploaded Files
            </h3>
            <button type="button" class="review-section__edit" data-edit-step="2">
              Edit
            </button>
          </div>
          <div class="review-section__content" id="review-files-content">
            <!-- Content will be populated by JavaScript -->
          </div>
        </div>

        <!-- Garment Specifications Review -->
        <div class="review-section" id="review-garments">
          <div class="review-section__header">
            <h3 class="review-section__title">
              <span class="review-section__icon">üëï</span>
              Garment Specifications
            </h3>
            <button type="button" class="review-section__edit" data-edit-step="3">
              Edit
            </button>
          </div>
          <div class="review-section__content" id="review-garments-content">
            <!-- Content will be populated by JavaScript -->
          </div>
        </div>

        <!-- Order Summary -->
        <div class="review-section review-section--summary" id="review-summary">
          <div class="review-section__header">
            <h3 class="review-section__title">
              <span class="review-section__icon">üìä</span>
              Order Summary
            </h3>
          </div>
          <div class="review-section__content" id="review-summary-content">
            <!-- Content will be populated by JavaScript -->
          </div>
        </div>

      </div>

      <!-- Submission Notes -->
      <div class="submission-notes">
        <h4>What happens next?</h4>
        <ol>
          <li>We'll review your tech pack submission within 24-48 hours</li>
          <li>Our team will contact you with a detailed quote and timeline</li>
          <li>Once approved, we'll create samples for your review</li>
          <li>After sample approval, we'll proceed with full production</li>
        </ol>
      </div>

      <!-- Final Terms -->
      <div class="submission-terms">
        <label class="submission-terms__checkbox">
          <input type="checkbox" id="terms-agreement" required>
          <span class="submission-terms__checkmark"></span>
          I agree to the terms and conditions and confirm that all information provided is accurate
        </label>
      </div>

      <div class="step-navigation">
        <button type="button" class="btn btn-secondary" id="prev-step-btn">
          Previous
        </button>
        <button type="button" class="btn btn-primary" id="submit-techpack-btn" disabled>
          <span class="btn-icon">üì§</span>
          Submit Tech Pack
        </button>
      </div>

    </div>
  </div>
</div>
</div>

<script src="{{ 'techpack-app-modern.js' | asset_url }}" defer></script>

<style>
.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--tp-space-md);
  margin-bottom: var(--tp-space-md);
}

@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
    gap: var(--tp-space-sm);
  }
}
</style>

{% schema %}
{
  "name": "Techpack Modern Step 1",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Page Title",
      "default": "Tech Pack Submission"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Page Subtitle",
      "default": "Professional garment development made simple"
    }
  ],
  "presets": [
    {
      "name": "Techpack Modern Step 1",
      "category": "Custom"
    }
  ]
}
{% endschema %}